<view class="container">
  <!-- 题目信息卡片 -->
  <view class="question-card">
    <view class="question-header">
      <view class="subject-tag">{{question.subject}}</view>
      <view class="knowledge-tag">{{question.knowledgePoint}}</view>
      <view class="mastered-status {{question.mastered ? 'mastered' : ''}}">
        {{question.mastered ? '已掌握' : '待掌握'}}
      </view>
    </view>

    <view class="question-content">
      <text class="content-title">题目内容</text>
      <text class="content-text">{{question.content}}</text>
    </view>

    <image wx:if="{{question.imageUrl}}" class="question-image" src="{{question.imageUrl}}" mode="widthFix"></image>
  </view>

  <!-- AI 分析卡片 -->
  <view class="analysis-card">
    <view class="card-title">
      <image class="ai-icon" src="/images/ai.png" mode="aspectFit"></image>
      <text>AI 智能分析</text>
    </view>

    <view class="analysis-section">
      <text class="section-title">错误原因</text>
      <text class="section-content">{{analysis.errorReason}}</text>
    </view>

    <view class="analysis-section">
      <text class="section-title">知识点讲解</text>
      <text class="section-content">{{analysis.explanation}}</text>
    </view>

    <view class="analysis-section">
      <text class="section-title">解题思路</text>
      <text class="section-content">{{analysis.solution}}</text>
    </view>

    <view class="analysis-section">
      <text class="section-title">易错提示</text>
      <text class="section-content warning">{{analysis.warningTip}}</text>
    </view>
  </view>

  <!-- 相关知识点 -->
  <view class="related-card">
    <text class="card-title">相关知识点</text>
    <view class="tag-list">
      <view class="tag-item" wx:for="{{relatedKnowledge}}" wx:key="index">
        {{item}}
      </view>
    </view>
  </view>

  <!-- 底部操作按钮 -->
  <view class="bottom-actions">
    <button class="action-btn secondary" bindtap="startPractice">
      <image class="btn-icon" src="/images/practice.png" mode="aspectFit"></image>
      强化练习
    </button>
    <button class="action-btn primary {{question.mastered ? 'mastered' : ''}}" bindtap="toggleMastered">
      <image class="btn-icon" src="/images/{{question.mastered ? 'check' : 'uncheck'}}.png" mode="aspectFit"></image>
      {{question.mastered ? '已掌握' : '标记已掌握'}}
    </button>
  </view>
</view>
