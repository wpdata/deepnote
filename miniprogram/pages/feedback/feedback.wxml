<view class="container">
  <!-- é¡¶éƒ¨æç¤º -->
  <view class="header">
    <text class="header-icon">ğŸ’¬</text>
    <text class="header-title">å¸®åŠ©ä¸åé¦ˆ</text>
    <text class="header-desc">æ‚¨çš„æ„è§å¯¹æˆ‘ä»¬å¾ˆé‡è¦</text>
  </view>

  <!-- åé¦ˆè¡¨å• -->
  <view class="form">
    <!-- åé¦ˆç±»å‹ -->
    <view class="form-item">
      <text class="form-label">åé¦ˆç±»å‹</text>
      <picker mode="selector" range="{{feedbackTypes}}" value="{{typeIndex}}" bindchange="onTypeChange">
        <view class="picker-view">
          <text>{{feedbackTypes[typeIndex]}}</text>
          <text class="arrow">â–¼</text>
        </view>
      </picker>
    </view>

    <!-- åé¦ˆå†…å®¹ -->
    <view class="form-item">
      <text class="form-label">åé¦ˆå†…å®¹ <text class="required">*</text></text>
      <textarea
        class="textarea"
        placeholder="è¯·è¯¦ç»†æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜æˆ–å»ºè®®..."
        value="{{content}}"
        bindinput="onContentInput"
        maxlength="-1"
        auto-height
      />
      <text class="char-count">{{content.length}} å­—</text>
    </view>

    <!-- è”ç³»æ–¹å¼(å¯é€‰) -->
    <view class="form-item">
      <text class="form-label">è”ç³»æ–¹å¼ (å¯é€‰)</text>
      <input
        class="input"
        placeholder="è¯·ç•™ä¸‹æ‚¨çš„è”ç³»æ–¹å¼ï¼Œæ–¹ä¾¿æˆ‘ä»¬å›å¤"
        value="{{contact}}"
        bindinput="onContactInput"
      />
    </view>

    <!-- æäº¤æŒ‰é’® -->
    <button class="submit-btn" bindtap="onSubmit" disabled="{{submitting}}">
      {{submitting ? 'æäº¤ä¸­...' : 'æäº¤åé¦ˆ'}}
    </button>
  </view>

  <!-- å†å²åé¦ˆ -->
  <view class="history" wx:if="{{historyList.length > 0}}">
    <view class="history-header">
      <text class="history-title">æˆ‘çš„åé¦ˆ</text>
      <text class="history-count">å…± {{historyList.length}} æ¡</text>
    </view>
    <view class="history-list">
      <view class="history-item" wx:for="{{historyList}}" wx:key="_id">
        <view class="history-top">
          <text class="history-type">{{item.type}}</text>
          <text class="history-time">{{item.createTime}}</text>
        </view>
        <text class="history-content">{{item.content}}</text>
        <view class="history-status" wx:if="{{item.reply}}">
          <text class="status-label">å®˜æ–¹å›å¤:</text>
          <text class="status-text">{{item.reply}}</text>
        </view>
      </view>
    </view>
  </view>
</view>
