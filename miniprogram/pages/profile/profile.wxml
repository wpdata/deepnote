<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <button class="avatar-btn" open-type="chooseAvatar" bindchooseavatar="onChooseAvatar">
      <image wx:if="{{userInfo.avatarUrl}}" class="avatar-img" src="{{userInfo.avatarUrl}}" mode="aspectFill" />
      <view wx:else class="avatar-placeholder">ğŸ‘¤</view>
    </button>
    <view class="user-info">
      <view class="nickname-container">
        <input
          wx:if="{{isEditingNickname}}"
          class="nickname-input"
          type="nickname"
          value="{{userInfo.nickName}}"
          bindblur="onNicknameBlur"
          bindinput="onNicknameInput"
          placeholder="è¯·è¾“å…¥æ˜µç§°"
          auto-focus
        />
        <text wx:else class="username" bindtap="onEditNickname">{{userInfo.nickName || 'ç‚¹å‡»è®¾ç½®æ˜µç§°'}}</text>
      </view>
      <view class="user-meta">
        <text class="study-days">å·²å­¦ä¹  {{userInfo.studyDays}} å¤©</text>
        <text wx:if="{{userInfo.grade}}" class="grade-tag">{{userInfo.grade.displayName}}</text>
        <text wx:else class="grade-tag unset" bindtap="onChangeGrade">ç‚¹å‡»è®¾ç½®å¹´çº§</text>
      </view>
    </view>
  </view>

  <!-- å­¦ä¹ æ•°æ®ç»Ÿè®¡ -->
  <view class="stats-card">
    <text class="card-title">å­¦ä¹ æ•°æ®</text>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-value">{{stats.totalErrors}}</text>
        <text class="stat-label">é”™é¢˜æ€»æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.masteredErrors}}</text>
        <text class="stat-label">å·²æŒæ¡</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.practiceCount}}</text>
        <text class="stat-label">ç»ƒä¹ æ¬¡æ•°</text>
      </view>
    </view>

    <view class="progress-section">
      <view class="progress-header">
        <text class="progress-label">æ€»ä½“æŒæ¡ç‡</text>
        <text class="progress-value">{{stats.masteredRate}}%</text>
      </view>
      <view class="progress-bar-bg">
        <view class="progress-bar" style="width: {{stats.masteredRate}}%"></view>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-item" bindtap="onChangeGrade">
      <view class="menu-left">
        <view class="menu-icon">ğŸ“</view>
        <text class="menu-title">å¹´çº§è®¾ç½®</text>
      </view>
      <view class="menu-right">
        <text class="menu-value">{{userInfo.grade ? userInfo.grade.displayName : 'æœªè®¾ç½®'}}</text>
        <text class="arrow-icon">â€º</text>
      </view>
    </view>

    <view class="menu-item" bindtap="onFeedback">
      <view class="menu-left">
        <view class="menu-icon">ğŸ’¬</view>
        <text class="menu-title">å¸®åŠ©ä¸åé¦ˆ</text>
      </view>
      <text class="arrow-icon">â€º</text>
    </view>

    <view class="menu-item" bindtap="onAbout">
      <view class="menu-left">
        <view class="menu-icon">â„¹ï¸</view>
        <text class="menu-title">å…³äºæˆ‘ä»¬</text>
      </view>
      <text class="arrow-icon">â€º</text>
    </view>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info">
    <text class="version-text">ç‰ˆæœ¬ 2.0.3</text>
  </view>
</view>
