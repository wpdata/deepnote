# DeepNote 素材优化说明

## 优化概览

本次优化使用**Microsoft Fluent Emoji 3D素材**替换部分emoji文本,提升视觉品质和专业度。

## 素材来源

### Microsoft Fluent Emoji (3D)
- **来源**: https://github.com/microsoft/fluentui-emoji
- **授权**: MIT License (开源免费)
- **风格**: 3D立体,现代精致
- **特点**: 高质量PNG,适合企业级应用

## 素材清单

### 1. 学科图标 (6个) - `/miniprogram/images/subjects/`

| 学科 | 文件名 | 素材来源 | 尺寸 |
|------|--------|----------|------|
| 数学 | math.png | Abacus (算盘) | ~48KB |
| 语文 | literature.png | Books (书籍) | ~26KB |
| 英语 | english.png | Books (书籍) | ~26KB |
| 物理 | physics.png | Magnet (磁铁) | ~24KB |
| 化学 | chemistry.png | Alembic (蒸馏器) | ~32KB |
| 生物 | biology.png | DNA (DNA) | ~35KB |

**总计**: ~191KB

### 2. TabBar导航图标 (8个) - `/miniprogram/images/tabbar/`

| 页面 | 普通状态 | 激活状态 | 素材来源 | 尺寸 |
|------|----------|----------|----------|------|
| 首页 | home.png | home-active.png | Camera | ~34KB × 2 |
| 扫描 | scan.png | scan-active.png | Camera | ~34KB × 2 |
| 错题 | errorbook.png | errorbook-active.png | Notebook | ~19KB × 2 |
| 我的 | profile.png | profile-active.png | Notebook | ~19KB × 2 |

**总计**: ~212KB

**⚠️ 重要限制**: 小程序TabBar图标大小限制为**40KB**,超过会编译报错。
- ❌ 原House图标 (~43KB) - 超出限制
- ✅ 使用Camera/Notebook (~19-34KB) - 符合要求

### 3. 个人中心菜单图标 (6个) - `/miniprogram/images/menu/`

| 功能 | 文件名 | 素材来源 | 尺寸 |
|------|--------|----------|------|
| 年级设置 | grade.png | Information (临时) | ~29KB |
| 数据备份 | backup.png | Cloud | ~19KB |
| 学科管理 | subject.png | Books | ~26KB |
| 通知设置 | notification.png | Bell | ~26KB |
| 帮助反馈 | feedback.png | Cloud (临时) | ~19KB |
| 关于我们 | about.png | Information | ~29KB |

**总计**: ~148KB

### 素材总计
- **文件数量**: 20个PNG文件
- **总大小**: ~619KB
- **格式**: PNG (透明背景)
- **建议尺寸**: 原图 (自动缩放)

## 代码更新

### 1. 首页学科图标 (home)

**WXML更新**:
```xml
<!-- 从emoji文本 -->
<text class="subject-icon">{{item.icon}}</text>

<!-- 改为image组件 -->
<image class="subject-icon-img" src="{{item.iconUrl}}" mode="aspectFit" />
```

**JS数据更新**:
```javascript
subjects: [
  {
    id: 'math',
    name: '数学',
    iconUrl: '/images/subjects/math.png',  // 新增
    // ...
  }
]
```

**CSS样式新增**:
```css
.subject-icon-img {
  width: 100rpx;
  height: 100rpx;
  padding: 20rpx;
  background: rgba(255, 255, 255, 0.7);
  border-radius: 50%;
  /* ... */
}
```

### 2. 个人中心菜单图标 (profile)

**WXML更新**:
```xml
<!-- 从emoji文本 -->
<text class="menu-icon">🎓</text>

<!-- 改为image组件 -->
<image class="menu-icon-img" src="/images/menu/grade.png" mode="aspectFit" />
```

**CSS样式新增**:
```css
.menu-icon-img {
  width: 56rpx;
  height: 56rpx;
  padding: 12rpx;
  border-radius: 50%;
  /* ... */
}
```

### 3. TabBar导航 (app.json)

**配置更新**:
```json
{
  "tabBar": {
    "selectedColor": "#667eea",  // 更新选中颜色
    "list": [
      {
        "pagePath": "pages/home/home",
        "text": "首页",
        "iconPath": "images/tabbar/home.png",
        "selectedIconPath": "images/tabbar/home-active.png"
      }
      // ...
    ]
  }
}
```

## 设计优化

### 图标样式统一
1. **圆形背景**: 所有图标使用圆形容器
2. **毛玻璃效果**: backdrop-filter: blur(20rpx)
3. **柔和阴影**: 内外双层阴影
4. **渐变背景**: rgba白色半透明渐变

### 视觉层次
- **学科图标**: 100rpx × 100rpx + 20rpx padding
- **菜单图标**: 56rpx × 56rpx + 12rpx padding
- **TabBar图标**: 系统默认尺寸

### 交互反馈
- **点击缩放**: transform: scale(0.9)
- **平滑过渡**: transition: 0.3s cubic-bezier
- **阴影变化**: 点击时阴影加深

## 混合使用策略

### 保留emoji的场景
以下场景继续使用emoji + 优化样式:
- **快捷功能卡片**: 🧮 口算检查
- **拍照识别设置**: ✂️ 切割方式、📷 图片类型等
- **状态提示**: ✅ 正确、❌ 错误、? 未判

### 使用PNG图标的场景
以下场景使用下载的PNG素材:
- **学科分类**: 数学、语文、英语、物理、化学、生物
- **底部导航**: 首页、扫描、错题、我的
- **个人中心菜单**: 年级设置、数据备份等

### 原因分析
| 场景 | 使用方案 | 原因 |
|------|----------|------|
| 学科图标 | PNG | 识别度高,专业性强 |
| TabBar | PNG | 系统规范,视觉统一 |
| 菜单图标 | PNG | 层次感强,品质提升 |
| 功能提示 | Emoji | 灵活便捷,语义直观 |
| 状态标记 | Emoji | 通用符号,无需素材 |

## 性能优化

### 图片加载优化
1. **懒加载**: image组件自动懒加载
2. **缓存机制**: 小程序自动缓存图片
3. **合理尺寸**: 使用原图,避免多尺寸

### 包体积控制
- 素材总大小: ~619KB
- 小程序限制: 2MB (主包)
- 占用比例: ~30%
- **建议**: 大于1MB的页面素材考虑分包

### 渲染性能
- **mode="aspectFit"**: 保持比例,避免变形
- **border-radius: 50%**: GPU加速
- **transform**: 硬件加速

## 未来优化建议

### 1. 彩色激活状态
为TabBar创建彩色版激活图标:
- 首页: 蓝紫色调
- 扫描: 紫色调
- 错题: 橙色调
- 我的: 绿色调

### 2. 补充缺失图标
- 英语: 更换为专门的英语学习图标
- 个人中心: 更换为人物头像图标
- 年级设置: 更换为毕业帽图标

### 3. 空状态插画
为以下场景添加空状态插画:
- 无错题数据
- 无练习记录
- 搜索无结果

### 4. 主题图标适配
支持深色模式下的图标适配:
- 提供深色版本素材
- 或使用CSS filter调整

## 常见问题

### Q1: TabBar图标显示编译错误
**错误信息**:
```
The size of ["tabBar"]["list"][0]["iconPath"] exceeds 40kb
```

**原因**: 小程序TabBar图标有**40KB大小限制**

**解决方案**:
1. **压缩图标**: 使用TinyPNG等工具压缩
2. **更换图标**: 选择更小尺寸的素材
3. **简化设计**: 使用简约风格图标

**推荐工具**:
- TinyPNG: https://tinypng.com/
- ImageOptim (Mac): https://imageoptim.com/
- Squoosh: https://squoosh.app/

### Q2: 图标显示模糊
**原因**: 图标尺寸过小或压缩过度

**解决方案**:
- 使用 2x 或 3x 分辨率图标
- 保持PNG透明度
- 避免过度压缩(保持80%以上质量)

### Q3: TabBar图标颜色无法改变
**原因**: 小程序TabBar只支持原始图标颜色

**解决方案**:
- 提供两套图标(普通+激活状态)
- 使用纯色或简单配色的图标
- 激活状态使用彩色或加粗版本

## 维护说明

### 添加新素材
1. 从 Microsoft Fluent Emoji 下载3D版本
2. 保存到对应目录 (subjects/tabbar/menu/empty)
3. 文件命名: 小写英文 + 连字符
4. 更新本文档的素材清单

### 替换现有素材
1. 保持文件名不变
2. 清理小程序缓存重新编译
3. 验证显示效果

### 图标规范
- 格式: PNG (透明背景)
- 尺寸: 保持原图 (200-500px)
- 命名: 语义化小写英文
- 目录: 按功能分类存放

## 授权说明

### Microsoft Fluent Emoji
```
MIT License

Copyright (c) Microsoft Corporation.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction...
```

**使用范围**:
- ✅ 商业使用
- ✅ 修改分发
- ✅ 专利授权
- ⚠️ 需保留版权声明

### 本项目使用声明
DeepNote使用Microsoft Fluent Emoji作为UI素材,遵循MIT协议。

---

**最后更新**: 2025-10-31
**更新内容**: 首次引入Fluent Emoji 3D素材,优化学科图标、TabBar和菜单图标
