# ğŸ¨ è£å‰ªåŠŸèƒ½ä¼˜åŒ–è¯´æ˜

## âœ… å·²å®Œæˆçš„ä¼˜åŒ–

### 1. å¢åŠ è£å‰ªè¾¹è· (é¿å…é¢˜ç›®è¢«æˆªæ–­)

**é—®é¢˜**: é¢˜ç›®è¾¹ç¼˜è¢«è£å‰ªæ‰,å†…å®¹ä¸å®Œæ•´

**è§£å†³æ–¹æ¡ˆ**: åœ¨è£å‰ªæ—¶å¢åŠ  20 åƒç´ çš„è¾¹è·

```javascript
// å¢åŠ è¾¹è·,é¿å…é¢˜ç›®è¢«æˆªæ–­
const padding = 20 // åƒç´ 
const left = Math.max(0, Math.min(...xs) - padding)
const top = Math.max(0, Math.min(...ys) - padding)
const right = Math.min(imageWidth, Math.max(...xs) + padding)
const bottom = Math.min(imageHeight, Math.max(...ys) + padding)
```

**æ•ˆæœ**:
- âœ… é¢˜ç›®å®Œæ•´æ˜¾ç¤º
- âœ… åŒ…å«é¢˜ç›®å‘¨è¾¹çš„ä¸Šä¸‹æ–‡
- âœ… è§†è§‰æ•ˆæœæ›´å¥½

---

### 2. ä¼˜åŒ–é¢˜ç›®é¢„è§ˆå¡ç‰‡å¸ƒå±€

**é—®é¢˜**: é¢˜ç›®ç¼–å·å’Œå›¾ç‰‡è·ç¦»å¤ªè¿œ,ä¸çŸ¥é“å“ªä¸ªå›¾ç‰‡å¯¹åº”å“ªä¸ªé¢˜ç›®

**è§£å†³æ–¹æ¡ˆ**: é‡æ–°è®¾è®¡å¡ç‰‡å¸ƒå±€

#### æ–°çš„å¡ç‰‡ç»“æ„:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¢˜ç›® 1              âœ“      â”‚  â† é¡¶éƒ¨æ ‡é¢˜æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚    [é¢˜ç›®è£å‰ªå›¾ç‰‡]          â”‚  â† å›¾ç‰‡åŒºåŸŸ
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ ·å¼ä¼˜åŒ–:

1. **æ¸…æ™°çš„è§†è§‰å±‚æ¬¡**
   - é¢˜ç›®ç¼–å·åœ¨é¡¶éƒ¨,ä¸å›¾ç‰‡ç´§å¯†ç›¸è¿
   - ä½¿ç”¨åˆ†éš”çº¿åŒºåˆ†æ ‡é¢˜å’Œå†…å®¹
   - é€‰ä¸­çŠ¶æ€æœ‰æ˜æ˜¾çš„è“è‰²è¾¹æ¡†å’Œé˜´å½±

2. **å¡ç‰‡å¼å¸ƒå±€**
   ```css
   .question-item {
     background: #fff;
     border-radius: 16rpx;
     padding: 20rpx;
     box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
     border: 3rpx solid transparent;
   }

   .question-item.selected {
     border-color: #1677FF;
     box-shadow: 0 4rpx 20rpx rgba(22, 119, 255, 0.2);
   }
   ```

3. **æ ‡é¢˜æ è®¾è®¡**
   ```css
   .question-header {
     display: flex;
     justify-content: space-between;
     align-items: center;
     margin-bottom: 12rpx;
     padding-bottom: 12rpx;
     border-bottom: 1rpx solid #f0f0f0;
   }
   ```

4. **å›¾ç‰‡å®¹å™¨**
   ```css
   .question-image-wrapper {
     width: 100%;
     background: #f8f8f8;
     border-radius: 12rpx;
     overflow: hidden;
   }
   ```

---

## ğŸ“Š ä¼˜åŒ–å‰åå¯¹æ¯”

### ä¼˜åŒ–å‰
âŒ é—®é¢˜:
- é¢˜ç›®è¾¹ç¼˜è¢«è£æ‰
- é¢˜ç›®ç¼–å·å’Œå›¾ç‰‡åˆ†ç¦»
- ä¸æ¸…æ¥šå“ªä¸ªç¼–å·å¯¹åº”å“ªå¼ å›¾
- å¸ƒå±€æ¾æ•£,ä¸ç´§å‡‘

### ä¼˜åŒ–å
âœ… æ”¹è¿›:
- âœ… é¢˜ç›®å®Œæ•´,æœ‰è¾¹è·ä¿æŠ¤
- âœ… é¢˜ç›®ç¼–å·åœ¨å›¾ç‰‡ä¸Šæ–¹,ç´§å¯†ç›¸è¿
- âœ… å¡ç‰‡å¼å¸ƒå±€,ä¸€ç›®äº†ç„¶
- âœ… é€‰ä¸­çŠ¶æ€æ¸…æ™°(è“è‰²è¾¹æ¡†+é˜´å½±)
- âœ… å¸ƒå±€ç´§å‡‘,ç¾è§‚å¤§æ–¹

---

## ğŸ¯ ç”¨æˆ·ä½“éªŒæå‡

1. **æ›´ç›´è§‚çš„é¢˜ç›®è¯†åˆ«**
   - æ¯ä¸ªå¡ç‰‡=ä¸€ä¸ªé¢˜ç›®
   - ç¼–å·åœ¨é¡¶éƒ¨,ç«‹å³çŸ¥é“æ˜¯ç¬¬å‡ é¢˜

2. **æ›´æ¸…æ™°çš„é€‰æ‹©çŠ¶æ€**
   - æœªé€‰ä¸­:ç°è‰²è¾¹æ¡†
   - é€‰ä¸­:è“è‰²è¾¹æ¡†+è“è‰²å‹¾é€‰æ ‡è®°
   - è§†è§‰åé¦ˆæ˜æ˜¾

3. **æ›´å®Œæ•´çš„é¢˜ç›®å†…å®¹**
   - 20åƒç´ è¾¹è·ä¿è¯é¢˜ç›®ä¸è¢«æˆªæ–­
   - åŒ…å«é¢˜ç›®å‘¨è¾¹çš„ä¸Šä¸‹æ–‡ä¿¡æ¯

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### è£å‰ªè¾¹è·è®¡ç®—

```javascript
// åŸå§‹åæ ‡
const left_original = Math.min(...xs)
const top_original = Math.min(...ys)

// å¢åŠ è¾¹è· (ç¡®ä¿ä¸è¶…å‡ºå›¾ç‰‡è¾¹ç•Œ)
const padding = 20
const left = Math.max(0, left_original - padding)
const top = Math.max(0, top_original - padding)
const right = Math.min(imageWidth, right_original + padding)
const bottom = Math.min(imageHeight, bottom_original + padding)
```

### å“åº”å¼å¸ƒå±€

- ä½¿ç”¨ `flex` å¸ƒå±€ç¡®ä¿åœ¨ä¸åŒå±å¹•ä¸Šéƒ½èƒ½æ­£å¸¸æ˜¾ç¤º
- `widthFix` å›¾ç‰‡æ¨¡å¼ä¿æŒå›¾ç‰‡æ¯”ä¾‹
- `scroll-view` æ”¯æŒä¸Šä¸‹æ»šåŠ¨æŸ¥çœ‹æ‰€æœ‰é¢˜ç›®

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

### æŸ¥çœ‹è£å‰ªæ•ˆæœ
1. æ‹ç…§æˆ–é€‰æ‹©åŒ…å«å¤šé¢˜ç›®çš„å›¾ç‰‡
2. ç­‰å¾…è‡ªåŠ¨è£å‰ªå®Œæˆ
3. æŸ¥çœ‹æ¯ä¸ªé¢˜ç›®çš„é¢„è§ˆå¡ç‰‡
4. ç‚¹å‡»å¡ç‰‡å¯é€‰æ‹©/å–æ¶ˆé€‰æ‹©

### è°ƒæ•´è¾¹è· (å¯é€‰)
å¦‚æœéœ€è¦è°ƒæ•´è¾¹è·å¤§å°,ä¿®æ”¹ `scan.js` ä¸­çš„ `padding` å€¼:

```javascript
// åœ¨ cropSingleQuestion å‡½æ•°ä¸­
const padding = 20  // è°ƒæ•´è¿™ä¸ªå€¼ (å•ä½:åƒç´ )
```

**å»ºè®®å€¼**:
- 15-20: æ ‡å‡†è¾¹è· (æ¨è)
- 30-40: è¾ƒå¤§è¾¹è· (é¢˜ç›®é—´è·è¾ƒå¤§æ—¶)
- 10: æœ€å°è¾¹è· (ç´§å‡‘è£å‰ª)

---

## ğŸš€ æœªæ¥ä¼˜åŒ–æ–¹å‘

- [ ] æ”¯æŒç”¨æˆ·æ‰‹åŠ¨è°ƒæ•´è£å‰ªåŒºåŸŸ
- [ ] æ·»åŠ é¢˜ç›®é¢„è§ˆæ”¾å¤§åŠŸèƒ½
- [ ] æ”¯æŒæ‰¹é‡è°ƒæ•´æ‰€æœ‰é¢˜ç›®çš„è¾¹è·
- [ ] æ·»åŠ è£å‰ªè´¨é‡é€‰æ‹© (å¿«é€Ÿ/æ ‡å‡†/é«˜æ¸…)
- [ ] æ”¯æŒé¢˜ç›®é‡æ–°æ’åº

---

**æ›´æ–°æ—¶é—´**: 2025-10-27
**ç›¸å…³æ–‡ä»¶**:
- `miniprogram/pages/scan/scan.js` - è£å‰ªé€»è¾‘
- `miniprogram/pages/scan/scan.wxml` - é¡µé¢ç»“æ„
- `miniprogram/pages/scan/scan.wxss` - æ ·å¼å®šä¹‰
